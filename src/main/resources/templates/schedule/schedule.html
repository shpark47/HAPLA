<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>여행 일정</title>
    <link rel="stylesheet" href="/css/schedule.css" type="text/css">
</head>
<body>

    <div class="container">
        <!-- 🌍 왼쪽 사이드바 -->
        <div class="sidebar">
            <div class="sidebar-head">
                <span class="menu">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M 3 5 A 1.0001 1.0001 0 1 0 3 7 L 21 7 A 1.0001 1.0001 0 1 0 21 5 L 3 5 z M 3 11 A 1.0001 1.0001 0 1 0 3 13 L 21 13 A 1.0001 1.0001 0 1 0 21 11 L 3 11 z M 3 17 A 1.0001 1.0001 0 1 0 3 19 L 21 19 A 1.0001 1.0001 0 1 0 21 17 L 3 17 z"></path>
                    </svg>
                </span>
                <span class="title">여행 제목</span>
            </div>

            <div class="date-list">
                <div class="date-container">
                    <div class="plan-title">2월 6일</div>
                    <div class="date-item">
                        <button class="control-add">➕ 추가</button>
                    </div>
                </div>
                <div class="date-container">
                    <div class="plan-title">2월 7일</div>
                    <div class="date-item">
                        <button class="control-btn">📍</button>
                        <button class="control-btn">📝</button>
                        <button class="control-btn">❌</button>
                    </div>
                </div>
                <div class="date-container">
                    <div class="plan-title">2월 8일</div>
                    <div class="date-item">
                        <button class="control-add">➕ 추가</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 🌍 오른쪽 Google 지도 -->
        <div id="map"></div>
    </div>

    <script>
    
    // ✅ 일정 페이지가 로드될 때 실행되는 함수
    document.addEventListener("DOMContentLoaded", function () {
        const tripData = localStorage.getItem("tripData");

        if (tripData) {
            const data = JSON.parse(tripData);

            // ✅ 선택한 도시 정보 적용
            if (data.city) {
                document.getElementById("tripTitle").textContent = `${data.city.name}, ${data.city.country}`;
            }

            // ✅ 선택한 날짜 정보 적용
            document.getElementById("tripDates").textContent = `📅 ${data.startDate} ~ ${data.endDate}`;

            // ✅ 지도 위치 변경
            initMap(data.city.lat, data.city.lng);
        }
    });
    
    

    // ✅ Google 지도 초기화 함수
    function initMap(lat = 48.8566, lng = 2.3522) {
        new google.maps.Map(document.getElementById('map'), {
            center: { lat: lat, lng: lng },
            zoom: 5
        });
    }
    </script>
    
    <!-- Google Maps API -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUKMdSgSqvtUy4wZvUxqA6I_c0Zk4InEU&callback=initMap"></script>
    

</body>
</html>
